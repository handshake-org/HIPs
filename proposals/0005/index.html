<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width"><link rel=stylesheet href=https://hsd-dev.org/css/main.css><link rel=stylesheet href=https://hsd-dev.org/css/github-markdown.min.css><link rel=stylesheet href=/HIPs/css/style.css><title>Name data standard for alternative namespace resolution - Handshake Improvement Proposals</title><link rel=icon type=image/x-icon href=https://handshake.org/img/favicon/hns-favicon.ico><title>Handshake Improvement Proposals</title><meta name=title content="Name data standard for alternative namespace resolution"><meta name=description content="HIP-0005\nCategory: Informational\nStatus: Draft"><meta name=author content="Mike Carson <https://impervious.com/>"><meta name=author content="Matthew Zipkin (@pinheadmz)"><meta property="og:type" content="website"><meta property="og:url" content="https://hsd-dev.org/HIPs/proposals/0005/"><meta property="og:title" content="Name data standard for alternative namespace resolution"><meta property="og:description" content="HIP-0005\nCategory: Informational\nStatus: Draft"><meta property="og:image" content="https://hsd-dev.org/img/logo.svg"><meta property="twitter:card" content="summary_large_image"><meta property="twitter:url" content="https://hsd-dev.org/HIPs/proposals/0005/"><meta property="twitter:title" content="Name data standard for alternative namespace resolution"><meta property="twitter:description" content="HIP-0005\nCategory: Informational\nStatus: Draft"><meta property="twitter:image" content="https://hsd-dev.org/img/logo.svg"></head><body><header><a href=/><img alt="Handshake logo" src=https://hsd-dev.org/img/logo.svg></a></header><main><nav><div class=wrapper><ul><li><strong>HIPs</strong></li><li><a href=/HIPs/>Home</a></li><li><a href=/HIPs/proposals/>Proposals</a></li><li><a href=https://t.me/hns_tech>Tech Chat</a></li></ul><ul><li><strong class=upper>category</strong></li><li class=capitalize><a href=https://hsd-dev.org/HIPs/category/informational>Informational</a></li><li class=capitalize><a href=https://hsd-dev.org/HIPs/category/standards-track>Standards track</a></li></ul><ul><li><strong class=upper>status</strong></li><li class=capitalize><a href=https://hsd-dev.org/HIPs/status/draft>Draft</a></li></ul></div></nav><article class=page><section class=markdown-body><h2>HIP-0005: Name data standard for alternative namespace resolution</h2><h2 id=abstract>Abstract</h2><p>This HIP describes how to set the data for a Handshake name so that it can resolved via an external namespace or alternative consensus system.
Resolution must be performed by an extension to a Handshake resolver which may not be included by default in full or light clients.</p><h2 id=motivation>Motivation</h2><p>There may be various reasons to resolve a name on an alternative namespace other than a domain name or an name server hosted on an IP address.
One example is decentralized subdomains: software could recognize the special records for an HNS name and resolve the user query on an external system,
where protocol rules allow for censorship-resistant subdomain registration, relieving those domain owners of parent-zone risk.</p><h2 id=name-data-standard>Name data standard</h2><p>External resolution is triggered by setting a special NS record for a Handshake name.
The <code>ns</code> value must end in a name that is invalid or otherwise blocked by the Handshake root name server.
For example, names that begin with an underscore are normally invalid, and names like <code>.bit</code> and <code>.eth</code> are normally blocked.
The invalid &ldquo;top level domain&rdquo; of the <code>ns</code> record is referred to as the HIP-5 <strong><code>protocol</code></strong>.</p><p>Any additional labels in the <code>ns</code> field are treated as protocol-specific inputs for the external resolver,
and are referred to as the HIP-5 <strong><code>data</code></strong>.</p><p>This is an example of a Handshake name resource that should trigger external resolution with a compatible plug-in:</p><pre><code>{
  &quot;records&quot;: [{
    &quot;type&quot;: &quot;NS&quot;,
    &quot;ns&quot;: &quot;0x36fc69f0983E536D1787cC83f481581f22CCA2A1._eth.&quot;
  }]
}
</code></pre><p>In this example, the <strong><code>protocol</code></strong> is <code>_eth</code> which corresponds to &ldquo;EIP-137 compatible Ethereum contract.&rdquo;
The <strong><code>data</code></strong> is <code>0x36fc69f0983E536D1787cC83f481581f22CCA2A1</code> which corresponds to an &ldquo;Ethereum contract address.&rdquo;</p><h2 id=external-name-resolution-for-handshake-tlds>External name resolution for Handshake TLDs</h2><p>To execute this protocol, a Handshake root nameserver must inspect its own responses to all queries.
If it detects a compatible NS record in the response to a query, the software extension should resolve
<strong>the initial query string</strong> using the external protocol defined by the NS record. The plug-in is effectively
a recursive resolver inside the HNS root zone.</p><p>Example dialog between user, their recursive resolver, the HNS root resolver, and the HIP-5 plug-in.
Notice how the plugin intercepts the <em>response</em> from the root name server.</p><p><code>?</code> denotes queries, <code>!</code> denotes responses and <code>A</code> / <code>NS</code> are DNS record types.</p><p><img src=hip-0005/hip5-resolver.png alt="HIP-5 Resolver Diagram"></p><h2 id=direct-resolution-of-external-namespace>Direct resolution of external namespace</h2><p>Because the Handshake resolver is running with a protocol extension plug-in, it should also
be possible for that same software to resolve alternative namespaces outside of Handshake referrals.
This mechanism is not really a feature of HIP-5 but is included here as a recommendation for software
implementing this HIP.</p><p>Example of direct ENS resolution using HIP-5 extended Handshake resolver.
Note how the <code>.eth</code> suffix resolves using the official ENS contract.</p><div class=highlight><pre style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-sh data-lang=sh>$ dig brantly.eth +short
120.240.32.33
</code></pre></div><h2 id=registered-protocols>Registered protocols</h2><table><thead><tr><th>data</th><th>suffix</th><th>protocol</th></tr></thead><tbody><tr><td>Ethereum contract address</td><td><code>._eth</code></td><td><a href=https://eips.ethereum.org/EIPS/eip-137>EIP-137</a> ENS-compatible contract deployed on Ethereum</td></tr><tr><td>ENS subdomain</td><td><code>.eth</code></td><td>Official ENS contract deployed on Ethereum</td></tr></tbody></table><h2 id=implementation>Implementation</h2><p><code>.eth</code> and <code>._eth</code>: <a href=https://github.com/imperviousinc/handover>https://github.com/imperviousinc/handover</a></p><hr><div class=info><strong>HIP:</strong><div>0005</div><strong>Status:</strong><div><a href=/HIPs/status/draft>Draft</a></div><strong>Type:</strong><div><a href=/HIPs/category/informational>Informational</a></div><strong>Created:</strong><div>Mon, 08 Feb 2021</div><strong>Last commit:</strong><div>Tue, 16 Mar 2021</div><strong>Authors:</strong><ul><li>Mike Carson &lt;https://impervious.com/></li><li>Matthew Zipkin (@pinheadmz)</li></ul></div><hr><a href=https://github.com/handshake-org/HIPs/blob/master/HIP-0005.md>Edit on GitHub</a></div></section><aside><h2>Table of Contents</h2><nav id=TableOfContents><ul><li><a href=#abstract>Abstract</a></li><li><a href=#motivation>Motivation</a></li><li><a href=#name-data-standard>Name data standard</a></li><li><a href=#external-name-resolution-for-handshake-tlds>External name resolution for Handshake TLDs</a></li><li><a href=#direct-resolution-of-external-namespace>Direct resolution of external namespace</a></li><li><a href=#registered-protocols>Registered protocols</a></li><li><a href=#implementation>Implementation</a></li></ul></nav></aside></article></main><footer id=footer>Â©&nbsp;2021 Handshake Community<a rel=license href=http://creativecommons.org/licenses/by-sa/4.0/>(Creative
Commons Attribution-ShareAlike 4.0 International License)</a></footer></body></html>